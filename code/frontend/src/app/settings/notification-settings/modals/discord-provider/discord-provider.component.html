<app-notification-provider-base
  [visible]="visible"
  modalTitle="Configure Discord Provider"
  [saving]="saving"
  [testing]="testing"
  [editingProvider]="editingProvider"
  (save)="onSave($event)"
  (cancel)="onCancel()"
  (test)="onTest($event)">

  <!-- Provider-specific configuration goes here -->
  <div slot="provider-config">
    <!-- Webhook URL Field -->
    <div class="field">
      <label for="webhook-url">
        <i class="pi pi-question-circle field-info-icon"
           title="Click for documentation"
           (click)="openFieldDocs('discord.webhookUrl')"></i>
        Webhook URL *
      </label>
      <input
        id="webhook-url"
        type="password"
        pInputText
        [formControl]="webhookUrlControl"
        placeholder="https://discord.com/api/webhooks/..."
        class="w-full" />
      <small *ngIf="hasFieldError(webhookUrlControl, 'required')" class="form-error-text">Webhook URL is required</small>
      <small *ngIf="hasFieldError(webhookUrlControl, 'pattern')" class="form-error-text">Must be a valid Discord webhook URL</small>
      <small class="form-helper-text">Your Discord webhook URL. Create one in your Discord server's channel settings under Integrations.</small>
    </div>

    <!-- Username Field (Optional) -->
    <div class="field">
      <label for="username">
        <i class="pi pi-question-circle field-info-icon"
           title="Click for documentation"
           (click)="openFieldDocs('discord.username')"></i>
        Username (Optional)
      </label>
      <input
        id="username"
        type="text"
        pInputText
        [formControl]="usernameControl"
        placeholder="Cleanuparr"
        class="w-full" />
      <small *ngIf="hasFieldError(usernameControl, 'maxlength')" class="form-error-text">Username cannot exceed 80 characters</small>
      <small class="form-helper-text">Override the default webhook username. Leave empty to use the webhook's default name.</small>
    </div>

    <!-- Avatar URL Field (Optional) -->
    <div class="field">
      <label for="avatar-url">
        <i class="pi pi-question-circle field-info-icon"
           title="Click for documentation"
           (click)="openFieldDocs('discord.avatarUrl')"></i>
        Avatar URL (Optional)
      </label>
      <input
        id="avatar-url"
        type="text"
        pInputText
        [formControl]="avatarUrlControl"
        placeholder="https://example.com/avatar.png"
        class="w-full" />
      <small *ngIf="hasFieldError(avatarUrlControl, 'pattern')" class="form-error-text">Must be a valid URL</small>
      <small class="form-helper-text">Override the default webhook avatar. Leave empty to use the webhook's default avatar.</small>
    </div>
  </div>
</app-notification-provider-base>
