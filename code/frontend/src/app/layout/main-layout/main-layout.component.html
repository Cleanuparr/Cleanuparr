<div class="layout-wrapper">
  <!-- Global toast container -->
  <app-toast-container></app-toast-container>
  
  <!-- Global confirmation dialog -->
  <p-confirmDialog></p-confirmDialog>
  <!-- Main layout with sidebar and content -->
  <div class="layout-main">
    <div class="sidebar">
      <app-sidebar-content 
        #sidebarContent
        [isMobile]="false"
        [enableMobileDrawer]="true">
      </app-sidebar-content>
    </div>
    
    <!-- Content Area -->
    <div class="layout-content">
      <!-- Content Header / Top Bar -->
      <div class="top-bar">
        <div class="top-color-line"></div>
        <div class="topbar-section left">
          <button pButton class="p-button-text sidebar-toggle-mobile" 
                  icon="pi pi-bars" 
                  (click)="sidebarContent.toggleMobileDrawer()"></button>
        </div>
        <div class="topbar-section center">
          <ng-container *ngIf="appStatus$ | async as status">
            <div class="version-bar" *ngIf="status.currentVersion || status.latestVersion">
              <ng-container *ngIf="status.currentVersion as current">
                <div class="version-item">
                  <i class="pi pi-code version-icon" aria-hidden="true"></i>
                  <span class="version-text">
                    <span class="version-label">Version: </span>
                    <a [href]="'https://github.com/Cleanuparr/Cleanuparr/releases/' + current" target="_blank" rel="noopener noreferrer">{{ current }}</a>
                  </span>
                </div>
              </ng-container>

              <div class="version-divider" *ngIf="status.currentVersion && status.latestVersion"></div>

              <ng-container *ngIf="status.latestVersion as latest">
                <div class="version-item">
                  <i class="pi pi-github version-icon" aria-hidden="true"></i>
                  <span class="version-text">
                    <span class="version-label">Latest: </span>
                    <a [href]="'https://github.com/Cleanuparr/Cleanuparr/releases/' + latest" target="_blank" rel="noopener noreferrer">{{ latest }}</a>
                  </span>
                </div>
              </ng-container>
            </div>
          </ng-container>
        </div>
        <div class="topbar-section right">
          <div class="topbar-spacer" aria-hidden="true"></div>
        </div>
      </div>
      
      <!-- Main Content -->
      <div class="layout-content-inner">
        <router-outlet></router-outlet>
      </div>
    </div>
  </div>
</div>
